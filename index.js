import{S as B,N as S,a as se,P as U,K as ne,i as G}from"./assets/vendor-vPelsMye.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();new B(".hero-swiper",{loop:!1,speed:600,grabCursor:!0,slidesPerView:1,spaceBetween:20,modules:[S],navigation:{nextEl:".swiper-btn-next",prevEl:".swiper-btn-prev"},breakpoints:{768:{speed:700},1440:{speed:800}},on:{init:function(){P(this)},slideChange:function(){P(this)}}});function P(e){const t=document.querySelector(".swiper-btn-prev"),o=document.querySelector(".swiper-btn-next");e.isBeginning?t.classList.add("button-dis"):t.classList.remove("button-dis"),e.isEnd?o.classList.add("button-dis"):o.classList.remove("button-dis")}const re=document.querySelectorAll(".hero-btn");re.forEach(e=>{e.addEventListener("click",()=>{const t=document.querySelector(".books");t&&t.scrollIntoView({behavior:"smooth",block:"start"})})});const r={BASE_URL:"https://books-backend.p.goit.global",END_CATEGORIES:"/books/category-list",END_TOP_BOOKS:"/books/top-books",END_CATEGORIE_ID:"/books/category?category=",END_BOOK_ID:"/books/",API_ERROR:"ApiError",NO_BOOKS:"NoBooks",ALL_CATEGORIES:"All categories",BOOK_LIST:"bookList",BOOK_CARD_LIST:"bookCardList",currentCategory:"",itemsPerView:24,viewedBooks:0,itemsToAdd:4,body:document.body,scr_btn_burger_close:"ico-sprite.svg#icon-x",scr_btn_burger_normal:"ico-sprite.svg#icon-menu-alt-right"};function d(e,t){e.classList.remove(t)}function u(e,t){e.classList.add(t)}function f(e,t){e.classList.toggle(t)}function T(e,t,o,s=!1){s&&(e.innerHTML=""),e.insertAdjacentHTML("beforeend",o(t))}function j(e){return e.map(({_id:o,list_name:s,author:n,price:i,title:c,book_image:a,book_image_width:l,book_image_height:N})=>`<li class="books-data-itm" data-id="${o}">
          <div class="books-data-img-container">
            <img
              src="${a}"
              alt="${c}"
              class="books-data-img"
            />
          </div>
          <div class="books-data-info">
						<div class="books-data-texts">
							<h3 class="books-data-title">${c}</h3>
							<p class="books-data-author">${n}</p>
						</div>
						<p class="books-data-price">$${i}</p>
					</div>
          <button class="secondary-button books-data-button">Learn More</button>
        </li>`).join("")}function ie(e){const t=e.filter(o=>o.list_name.trim()!=="").map(({list_name:o})=>`<li class="b-categories-itm" data-category="${o}">
          	<p class="b-categories-itm-text">${o}</p>
        	</li>`).join("");return`<li class="b-categories-itm" data-category="all">
						<p class="b-categories-itm-text">${r.ALL_CATEGORIES}</p>
					</li> ${t}`}function ce(){window.scrollTo({top:0,behavior:"smooth"})}const H=document.querySelector(".loader");function I(){d(H,"hidden"),console.log("loader show")}function x(){u(H,"hidden"),console.log("loader hidden")}async function F(e){var t;try{return await se.get(e)}catch(o){const s=((t=o.response)==null?void 0:t.status)??null;throw new A({message:`API error: ${o.message}`,name:r.API_ERROR,statusCode:s,error:o})}}class A extends Error{constructor({message:t,secondaryMessage:o="",name:s="CustomError",error:n=null,statusCode:i=null}){super(t),this.name=s,this.secondaryMessage=o,this.statusCode=i,this.originalError=n}}const w=document.querySelector("#modal-backdrop"),W=document.body;let ae=null;function le(e,t,o){t&&o&&e&&(t.addEventListener("click",()=>{let s=parseInt(e.value,10);!isNaN(s)&&s>1&&(e.value=s-1)}),o.addEventListener("click",()=>{let s=parseInt(e.value,10);const n=parseInt(e.dataset.max,10);!isNaN(s)&&!isNaN(n)&&s<n&&(e.value=s+1)}))}function de(){w.addEventListener("click",e=>{(e.target===w||e.target.closest(".modal-close"))&&R()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&R()})}async function ue(e){try{const t=await fetch(`https://books-backend.p.goit.global/books/${e}`);if(!t.ok)throw new Error("Не вдалося отримати дані про книгу");const o=await t.json(),s={bookImage:document.querySelector("#book-image"),bookTitle:document.querySelector("#book-title"),bookAuthor:document.querySelector("#book-author"),bookPrice:document.querySelector("#book-price"),quantityInput:document.querySelector("#book-quantity"),bookDetails:document.querySelector("#book-details"),bookShipping:document.querySelector("#book-shipping"),bookReturns:document.querySelector("#book-returns")};s.bookImage&&(s.bookImage.src=o.book_image);const n={bookTitle:o.title,bookAuthor:o.author,bookPrice:`$${o.price}`,bookDetails:o.description,bookShipping:"We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",bookReturns:"You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free."};for(const[a,l]of Object.entries(n))s[a]&&(s[a].textContent=l);const i=o.quantity||100;s.quantityInput&&(s.quantityInput.dataset.max=i,s.quantityInput.value=1),w.classList.remove("is-hidden"),W.classList.add("locked");const c=document.querySelector(".accordion-container");c&&c.querySelectorAll(".ac").forEach(l=>{const N=l.querySelector(".ac-trigger"),L=l.querySelector(".ac-panel");N.addEventListener("click",()=>{l.classList.contains("is-active")?(L.style.height="0px",l.classList.remove("is-active")):(l.classList.add("is-active"),L.style.height=L.scrollHeight+"px")}),L.style.height="0px"})}catch(t){console.error("Помилка при відкритті модального вікна:",t)}}function R(){w.classList.add("is-hidden"),W.classList.remove("modal-open")}document.addEventListener("DOMContentLoaded",()=>{de();const e=document.querySelector("#book-form");e&&e.addEventListener("submit",i=>{i.preventDefault(),alert("Дякуємо за покупку")});const t=document.querySelector("#add-to-cart");t&&t.addEventListener("click",()=>{const i=document.querySelector("#book-quantity").value;console.log(`Кількість обраних книг: ${i}`)});const o=document.querySelector("#book-quantity"),s=document.querySelector("#decrease-quantity"),n=document.querySelector("#increase-quantity");le(o,s,n)});const h={add(e,t){localStorage.setItem(e,JSON.stringify(t))},get(e){return JSON.parse(localStorage.getItem(e))||[]},addToCard(e,t,o,s=1,n){const i=this.get(e),c=i.findIndex(a=>a.id===t);if(c===-1)i.push({id:t,price:o,qty:s});else{const a=i[c];a.qty=Math.max(0,a.qty+(n==="+"?s:-s))}localStorage.setItem(e,JSON.stringify(i))},removeItemFromStorage(e,t){const s=this.get(e).filter(n=>n.id!==t);localStorage.setItem(e,JSON.stringify(s))},setTotalCard(e){const t=this.get(r.BOOK_CARD_LIST);let o=0;t.length&&(o=t.reduce((s,n)=>s+n.price*n.qty,0)),console.log(o),e.textContent=`${o.toFixed(2)} $`},count(e){return this.get(e).length},isInCardList(e,t){return this.get(e).find(o=>o.id===t)!==void 0},setCountTo(e,t){e.textContent=this.count(t)||0}},me=document.querySelector(".backdrop");document.querySelector(".modal-card");const fe=document.querySelector(".modal-close"),E=document.querySelector(".books-data-list"),b=document.querySelector(".b-categories-list"),v=document.querySelector(".categories-dropdown"),m=document.querySelector(".books-show-more"),z=document.querySelector(".not-found"),be=document.querySelector(".not-found-description"),M=document.querySelector(".not-found-title"),pe=document.querySelector(".b-categories-_text");async function ge(){try{const e=`${r.BASE_URL}${r.END_CATEGORIES}`,t=await F(e);return console.log("cats",t),T(b,t.data,ie,!0),!0}catch(e){return J(e),!1}}async function $(e,t=!1){var o;E.innerHTML="",I(),r.currentCat=e;try{const s=r.currentCat===r.ALL_CATEGORIES?`${r.BASE_URL}${r.END_TOP_BOOKS}`:`${r.BASE_URL}${r.END_CATEGORIE_ID}${r.currentCat}`,n=await F(s);let i=[];if(!((o=n==null?void 0:n.data)!=null&&o.length))throw new A({message:`No books found in "${r.currentCat}"`,secondaryMessage:"We couldn't find any books in this category.<br />Please try a different one.",name:r.NO_BOOKS});r.currentCat===r.ALL_CATEGORIES?i=n.data.map(a=>a.books).reduce((a,l)=>a.concat(l),[]):i=n.data,h.add(r.BOOK_LIST,i),r.viewedBooks=Math.min(h.count(r.BOOK_LIST),r.itemsPerView);let c=i.slice(0,r.viewedBooks);D(r.viewedBooks,i.length),T(E,c,j,!0),t||(f(b,"is-open"),f(v,"is-open")),x(),Q()}catch(s){J(s)}}function J(e){console.log(e),e instanceof A?(M.textContent=e.message,be.innerHTML=e.secondaryMessage):M.textContent="Unexpected error occurred.",d(b,"is-open"),d(v,"is-open"),d(z,"hidden"),u(m,"display-none"),D(0,0),x(),console.log("Error:",e.stack)}function Q(){r.viewedBooks<h.count(r.BOOK_LIST)?d(m,"display-none"):u(m,"display-none")}function Y(){r.itemsPerView=window.innerWidth>=1440?24:10,r.itemsPerView===10&&(d(b,"is-open"),d(v,"is-open"))}function D(e,t){pe.textContent=`Showing ${e} of ${t}`}document.addEventListener("DOMContentLoaded",async()=>{I(),Y(),await ge()&&$(r.ALL_CATEGORIES,!0)});window.addEventListener("resize",()=>{Y()});E.addEventListener("click",e=>{const t=e.target.closest(".books-data-button");if(!t)return;const o=t.closest(".books-data-itm");o&&ue(o.dataset.id)});v.addEventListener("click",()=>{f(b,"is-open"),f(v,"is-open")});b.addEventListener("click",e=>{u(m,"display-none"),b.querySelectorAll(".b-categories-itm").forEach(n=>{d(n,"is-active")});const o=e.target.closest("p");if(!o)return;const s=e.target.closest(".b-categories-itm");s&&u(s,"is-active"),u(z,"hidden"),$(o.textContent)});fe.addEventListener("click",()=>{u(me,"is-hidden"),d(r.body,"locked")});m.addEventListener("click",async()=>{I(),u(m,"display-none"),await new Promise(i=>setTimeout(i,400)),console.log("wait"),m.disabled=!0;const e=h.count(r.BOOK_LIST),t=r.viewedBooks,o=r.viewedBooks+r.itemsToAdd,s=h.get(r.BOOK_LIST);if(!s.length){$(r.currentCat),r.scrollToTop();return}const n=s.slice(t,o);r.viewedBooks=Math.min(o,e),D(r.viewedBooks,s.length),T(E,n,j,!1),Q(),x(),m.disabled=!1});new B(".feedbacks-swiper",{modules:[S,U],modules:[S,ne],loop:!1,grabCursor:!0,spaceBetween:20,slidesPerView:1,navigation:{prevEl:".feedbacks-swiper-button-left",nextEl:".feedbacks-swiper-button-right"},keyboard:{enabled:!0,onlyInViewport:!0,pageUpDown:!0},pagination:{el:".feedbacks-custom-swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},on:{init:function(){K(this)},slideChange:function(){K(this)}}});function K(e){const t=document.querySelector(".feedbacks-swiper-button-left"),o=document.querySelector(".feedbacks-swiper-button-right");e.isBeginning?t.classList.add("button-disabled"):t.classList.remove("button-disabled"),e.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}const g=document.querySelector(".burger-menu"),X=document.querySelector(".modal-menu"),ye=g.querySelector("use");g.addEventListener("click",e=>{g.disabled=!0,Z()});X.addEventListener("click",e=>{e.target.closest(".nav-link")&&Z()});function Z(){f(g,"is-open"),f(X,"is-open"),f(r.body,"locked"),ye.setAttribute("href",g.classList.contains("is-open")?r.scr_btn_burger_close:r.scr_btn_burger_normal),g.disabled=!1}const C=document.querySelector("#back-to-top");window.addEventListener("scroll",()=>{window.scrollY>600?d(C,"hidden"):u(C,"hidden")});C.addEventListener("click",()=>{ce()});const p=document.querySelector(".form"),ke=p.querySelectorAll(".form-input, .form-user-comment"),he=document.querySelector(".modal-close-btn"),ee=document.querySelector(".modal-overlay"),ve=document.querySelector(".events-list");let O="";ve.addEventListener("click",e=>{const t=e.target.closest(".events-item");!t||!e.target.closest(".card-btn")||(O=t.querySelector(".events-card-heading").textContent.trim(),Le(O))});p.addEventListener("submit",Se);ee.addEventListener("click",Ee);he.addEventListener("click",we);function Le(e){const t=document.querySelector(".modal-overlay");t.classList.add("is-open");const o=t.querySelector(".form-subtitle");o.textContent=e,document.body.classList.add("locked"),window.addEventListener("keydown",te)}function q(){document.querySelector(".modal-overlay").classList.remove("is-open"),document.body.classList.remove("locked"),window.removeEventListener("keydown",te)}function Se(e){e.preventDefault();let t=!0;if(ke.forEach(o=>{const s=o.nextElementSibling,n=o.value.trim();!o.checkValidity()||n===""?(o.classList.add("error"),s&&s.classList.contains("error-text")&&(s.style.display="block"),t=!1):(o.classList.remove("error"),s&&s.classList.contains("error-text")&&(s.style.display="none"))}),t){console.log("Форма валідна. Можна відправити.");const o={fullname:p.elements.fullname.value.trim(),email:p.elements.email.value.trim(),comment:p.elements.comment.value.trim()};console.log("Дані для відправки:",o),setTimeout(()=>{G.success({title:"Дякуємо!",message:`Ви успішно зареєструвалися на ${O}`,position:"topRight",class:"custom-toast"}),p.reset(),q()},500)}}function we(){q()}function Ee(e){e.target===ee&&q()}function te(e){e.key==="Escape"&&q()}let k=null;function qe(){k=new B(".events-swiper",{modules:[S,U],loop:!1,grabCursor:!0,spaceBetween:24,slidesPerView:1,navigation:{prevEl:".swiper-button-left",nextEl:".swiper-button-right"},pagination:{el:".custom-swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24}},on:{init:function(){V(this)},slideChange:function(){V(this)}}})}function _e(){k&&(k.destroy(!0,!0),k=null)}function oe(){const e=window.innerWidth,t=document.querySelector(".events-control-cont"),o=document.querySelector(".swiper-pagination");e>=1440?(_e(),t==null||t.classList.add("hidden"),o==null||o.classList.add("hidden")):(k||qe(),t==null||t.classList.remove("hidden"),o==null||o.classList.remove("hidden"))}oe();window.addEventListener("resize",oe);function V(e){const t=document.querySelector(".swiper-button-left"),o=document.querySelector(".swiper-button-right");e.isBeginning?t.classList.add("button-disabled"):t.classList.remove("button-disabled"),e.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}const y=document.querySelector(".footer-form"),_=y==null?void 0:y.querySelector(".footer-input");y&&y.addEventListener("submit",function(e){if(e.preventDefault(),!_.checkValidity()||_.value.trim()===""){_.classList.add("error");return}setTimeout(()=>{G.success({title:"Дякуємо!",message:"Ви успішно підписались",position:"topRight",class:"custom-toast"}),y.reset()},500)});
//# sourceMappingURL=index.js.map
