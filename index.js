import{S as q,N as _,a as Y,P as $,i as X}from"./assets/vendor-DgXuePoo.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();new q(".hero-swiper",{loop:!1,speed:600,grabCursor:!0,slidesPerView:1,spaceBetween:20,modules:[_],navigation:{nextEl:".swiper-btn-next",prevEl:".swiper-btn-prev"},breakpoints:{768:{speed:700},1440:{speed:800}},on:{init:function(){I(this)},slideChange:function(){I(this)}}});function I(e){const t=document.querySelector(".swiper-btn-prev"),o=document.querySelector(".swiper-btn-next");e.isBeginning?t.classList.add("button-dis"):t.classList.remove("button-dis"),e.isEnd?o.classList.add("button-dis"):o.classList.remove("button-dis")}const Z=document.querySelectorAll(".hero-btn");Z.forEach(e=>{e.addEventListener("click",()=>{const t=document.querySelector(".books");t&&t.scrollIntoView({behavior:"smooth",block:"start"})})});const i={BASE_URL:"https://books-backend.p.goit.global",END_CATEGORIES:"/books/category-list",END_TOP_BOOKS:"/books/top-books",END_CATEGORIE_ID:"/books/category?category=",END_BOOK_ID:"/books/",ALL_CATEGORIES:"All categories",BOOK_LIST:"bookList",BOOK_CARD_LIST:"bookCardList",currentCategory:"",itemsPerView:24,viewedBooks:0,itemsToAdd:4,body:document.body,scr_btn_burger_close:"ico-sprite.svg#icon-x",scr_btn_burger_normal:"ico-sprite.svg#icon-menu-alt-right"},D=document.querySelector(".loader");function N(){D.classList.remove("hidden"),console.log("loader show")}function P(){D.classList.add("hidden"),console.log("loader hidden")}function u(e,t){e.classList.remove(t)}function p(e,t){e.classList.add(t)}function l(e,t){e.classList.toggle(t)}function C(e,t,o,s=!1){s&&(e.innerHTML=""),e.insertAdjacentHTML("beforeend",o(t))}function M(e){return e.map(({_id:o,list_name:s,author:n,price:r,title:c,book_image:a,book_image_width:d,book_image_height:T})=>`<li class="books-data-itm" data-id="${o}">
          <div class="books-data-img-container">
            <img
              src="${a}"
              alt="${c}"
              class="books-data-img"
            />
          </div>
          <div class="books-data-info">
						<div class="books-data-texts">
							<h3 class="books-data-title">${c}</h3>
							<p class="books-data-author">${n}</p>
						</div>
						<h3 class="books-data-price">$${r}</h3>
					</div>
          <button class="secondary-button books-data-button">Learn More</button>
        </li>`).join("")}function ee(e){const t=e.filter(o=>o.list_name.trim()!=="").map(({list_name:o})=>`<li class="b-categories-itm" data-category="${o}">
          	<p class="b-categories-itm-text">${o}</p>
        	</li>`).join("");return`<li class="b-categories-itm" data-category="all">
						<p class="b-categories-itm-text">${i.ALL_CATEGORIES}</p>
					</li> ${t}`}function te(){window.scrollTo({top:0,behavior:"smooth"})}async function R(e){return await Y.get(e).then(t=>t).catch(t=>t.message)}const S=document.querySelector("#modal-backdrop");let oe=null;function V(e){e.key==="Escape"&&K()}function se(e,t,o){t&&o&&e&&(t.addEventListener("click",()=>{let s=parseInt(e.value,10);!isNaN(s)&&s>1&&(e.value=s-1)}),o.addEventListener("click",()=>{let s=parseInt(e.value,10);const n=parseInt(e.dataset.max,10);!isNaN(s)&&!isNaN(n)&&s<n&&(e.value=s+1)}))}function ne(){S.addEventListener("click",e=>{(e.target===S||e.target.closest(".modal-close"))&&K()}),window.addEventListener("keydown",V)}async function ie(e){try{const t=await fetch(`https://books-backend.p.goit.global/books/${e}`);if(!t.ok)throw new Error("Не вдалося отримати дані про книгу");const o=await t.json(),s={bookImage:document.querySelector("#book-image"),bookTitle:document.querySelector("#book-title"),bookAuthor:document.querySelector("#book-author"),bookPrice:document.querySelector("#book-price"),quantityInput:document.querySelector("#book-quantity"),bookDetails:document.querySelector("#book-details"),bookShipping:document.querySelector("#book-shipping"),bookReturns:document.querySelector("#book-returns")};s.bookImage&&(s.bookImage.src=o.book_image);const n={bookTitle:o.title,bookAuthor:o.author,bookPrice:`$${o.price}`,bookDetails:o.description,bookShipping:"We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",bookReturns:"You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free."};for(const[a,d]of Object.entries(n))s[a]&&(s[a].textContent=d);const r=o.quantity||100;s.quantityInput&&(s.quantityInput.dataset.max=r,s.quantityInput.value=1),S.classList.remove("is-hidden"),document.body.classList.add("locked");const c=document.querySelector(".accordion-container");c&&c.querySelectorAll(".ac").forEach(d=>{const T=d.querySelector(".ac-trigger"),h=d.querySelector(".ac-panel");T.addEventListener("click",()=>{d.classList.contains("is-active")?(h.style.height="0px",d.classList.remove("is-active")):(d.classList.add("is-active"),h.style.height=h.scrollHeight+"px")}),h.style.height="0px"})}catch(t){console.error("Помилка при відкритті модального вікна:",t)}}function K(){document.querySelector("#modal-backdrop").classList.add("is-hidden"),document.body.classList.remove("locked"),window.removeEventListener("keydown",V)}document.addEventListener("DOMContentLoaded",()=>{ne();const e=document.querySelector("#book-form");e&&e.addEventListener("submit",r=>{r.preventDefault(),alert("Дякуємо за покупку")});const t=document.querySelector("#add-to-cart");t&&t.addEventListener("click",()=>{const r=document.querySelector("#book-quantity").value;console.log(`Кількість обраних книг: ${r}`)});const o=document.querySelector("#book-quantity"),s=document.querySelector("#decrease-quantity"),n=document.querySelector("#increase-quantity");se(o,s,n)});const y={add(e,t){localStorage.setItem(e,JSON.stringify(t))},get(e){return JSON.parse(localStorage.getItem(e))||[]},addToCard(e,t,o,s=1,n){const r=this.get(e),c=r.findIndex(a=>a.id===t);if(c===-1)r.push({id:t,price:o,qty:s});else{const a=r[c];a.qty=Math.max(0,a.qty+(n==="+"?s:-s))}localStorage.setItem(e,JSON.stringify(r))},removeItemFromStorage(e,t){const s=this.get(e).filter(n=>n.id!==t);localStorage.setItem(e,JSON.stringify(s))},setTotalCard(e){const t=this.get(i.BOOK_CARD_LIST);let o=0;t.length&&(o=t.reduce((s,n)=>s+n.price*n.qty,0)),console.log(o),e.textContent=`${o.toFixed(2)} $`},count(e){return this.get(e).length},isInCardList(e,t){return this.get(e).find(o=>o.id===t)!==void 0},setCountTo(e,t){e.textContent=this.count(t)||0}},re=document.querySelector(".backdrop");document.querySelector(".modal-card");const ce=document.querySelector(".modal-close"),B=document.querySelector(".books-data-list"),g=document.querySelector(".b-categories-list"),v=document.querySelector(".categories-dropdown"),b=document.querySelector(".books-show-more"),G=document.querySelector(".not-found"),ae=document.querySelector(".not-found-title"),de=document.querySelector(".b-categories-_text");async function O(e,t=!1){i.currentCat=e;try{const o=i.currentCat===i.ALL_CATEGORIES?`${i.BASE_URL}${i.END_TOP_BOOKS}`:`${i.BASE_URL}${i.END_CATEGORIE_ID}${i.currentCat}`,s=await R(o);P();let n=[];s.data.length||(ae.textContent=`No books found in "${i.currentCat}"`,u(G,"hidden"),p(b,"hidden")),i.currentCat===i.ALL_CATEGORIES?n=s.data.map(c=>c.books).reduce((c,a)=>c.concat(a),[]):n=s.data,y.add(i.BOOK_LIST,n),i.viewedBooks=Math.min(y.count(i.BOOK_LIST),i.itemsPerView);let r=n.slice(0,i.viewedBooks);F(i.viewedBooks,n.length),C(B,r,M,!0),t||(l(g,"is-open"),l(v,"is-open")),U()}catch(o){console.log(o.message)}}function U(){i.viewedBooks<y.count(i.BOOK_LIST)?u(b,"display-none"):p(b,"display-none")}function j(){i.itemsPerView=window.innerWidth>=1440?24:10,i.itemsPerView===10&&(u(g,"is-open"),u(v,"is-open"))}async function le(){try{const e=`${i.BASE_URL}${i.END_CATEGORIES}`,t=await R(e);console.log(t),P(),C(g,t.data,ee,!0)}catch(e){console.log(e.message)}}function F(e,t){de.textContent=`Showing ${e} of ${t}`}document.addEventListener("DOMContentLoaded",()=>{N(),j(),le(),O(i.ALL_CATEGORIES,!0)});window.addEventListener("resize",()=>{j()});B.addEventListener("click",e=>{const t=e.target.closest(".books-data-button");if(!t)return;const o=t.closest(".books-data-itm");o&&ie(o.dataset.id)});v.addEventListener("click",()=>{l(g,"is-open"),l(v,"is-open")});g.addEventListener("click",e=>{g.querySelectorAll(".b-categories-itm").forEach(n=>{u(n,"is-active")});const o=e.target.closest("p");if(!o)return;N();const s=e.target.closest(".b-categories-itm");s&&p(s,"is-active"),p(G,"hidden"),O(o.textContent)});ce.addEventListener("click",()=>{p(re,"is-hidden"),u(i.body,"locked")});b.addEventListener("click",()=>{b.disabled=!0;const e=y.count(i.BOOK_LIST),t=i.viewedBooks,o=i.viewedBooks+i.itemsToAdd,s=y.get(i.BOOK_LIST);if(!s.length){O(i.currentCat),i.scrollToTop();return}const n=s.slice(t,o);i.viewedBooks=Math.min(o,e),F(i.viewedBooks,s.length),C(B,n,M,!1),U(),b.disabled=!1});new q(".feedbacks-swiper",{modules:[_,$],loop:!1,grabCursor:!0,spaceBetween:20,slidesPerView:1,navigation:{prevEl:".feedbacks-swiper-button-left",nextEl:".feedbacks-swiper-button-right"},pagination:{el:".feedbacks-custom-swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},on:{init:function(){x(this)},slideChange:function(){x(this)}}});function x(e){const t=document.querySelector(".feedbacks-swiper-button-left"),o=document.querySelector(".feedbacks-swiper-button-right");e.isBeginning?t.classList.add("button-disabled"):t.classList.remove("button-disabled"),e.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}const f=document.querySelector(".burger-menu"),z=document.querySelector(".modal-menu"),ue=f.querySelector("use");f.addEventListener("click",e=>{f.disabled=!0,H()});z.addEventListener("click",e=>{e.target.closest(".nav-link")&&H()});function H(){l(f,"is-open"),l(z,"is-open"),l(i.body,"locked"),ue.setAttribute("href",f.classList.contains("is-open")?i.scr_btn_burger_close:i.scr_btn_burger_normal),f.disabled=!1}const w=document.querySelector("#back-to-top");window.addEventListener("scroll",()=>{window.scrollY>600?u(w,"hidden"):p(w,"hidden")});w.addEventListener("click",()=>{te()});const m=document.querySelector(".form"),me=m.querySelectorAll(".form-input, .form-user-comment"),be=document.querySelector(".modal-close-btn"),J=document.querySelector(".modal-overlay"),fe=document.querySelector(".events-list");let E="";fe.addEventListener("click",e=>{const t=e.target.closest(".events-item");!t||!e.target.closest(".card-btn")||(E=t.querySelector(".events-card-heading").textContent.trim(),pe(E))});m.addEventListener("submit",ge);J.addEventListener("click",ye);be.addEventListener("click",ke);function pe(e){const t=document.querySelector(".modal-overlay");t.classList.add("is-open");const o=t.querySelector(".form-subtitle");o.textContent=e,document.body.classList.add("locked"),window.addEventListener("keydown",W)}function L(){document.querySelector(".modal-overlay").classList.remove("is-open"),document.body.classList.remove("locked"),window.removeEventListener("keydown",W)}function ge(e){e.preventDefault();let t=!0;if(me.forEach(o=>{const s=o.nextElementSibling,n=o.value.trim();!o.checkValidity()||n===""?(o.classList.add("error"),s&&s.classList.contains("error-text")&&(s.style.display="block"),t=!1):(o.classList.remove("error"),s&&s.classList.contains("error-text")&&(s.style.display="none"))}),t){console.log("Форма валідна. Можна відправити.");const o={fullname:m.elements.fullname.value.trim(),email:m.elements.email.value.trim(),comment:m.elements.comment.value.trim()};console.log("Дані для відправки:",o),setTimeout(()=>{X.success({title:"Дякуємо!",message:`Ви успішно зареєструвалися на ${E}`,position:"topRight",class:"custom-toast"}),m.reset(),L()},500)}}function ke(){L()}function ye(e){e.target===J&&L()}function W(e){e.key==="Escape"&&L()}let k=null;function he(){k=new q(".events-swiper",{modules:[_,$],loop:!1,grabCursor:!0,spaceBetween:24,slidesPerView:1,navigation:{prevEl:".swiper-button-left",nextEl:".swiper-button-right"},pagination:{el:".custom-swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24}},on:{init:function(){A(this)},slideChange:function(){A(this)}}})}function ve(){k&&(k.destroy(!0,!0),k=null)}function Q(){const e=window.innerWidth,t=document.querySelector(".events-control-cont"),o=document.querySelector(".swiper-pagination");e>=1440?(ve(),t==null||t.classList.add("hidden"),o==null||o.classList.add("hidden")):(k||he(),t==null||t.classList.remove("hidden"),o==null||o.classList.remove("hidden"))}Q();window.addEventListener("resize",Q);function A(e){const t=document.querySelector(".swiper-button-left"),o=document.querySelector(".swiper-button-right");e.isBeginning?t.classList.add("button-disabled"):t.classList.remove("button-disabled"),e.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}
//# sourceMappingURL=index.js.map
