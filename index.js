import{S,N as L,a as z,A as G,P as $,i as J}from"./assets/vendor-00AYbfjz.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=o(i);fetch(i.href,r)}})();new S(".swiper",{loop:!1,speed:600,grabCursor:!0,slidesPerView:1,modules:[L],navigation:{nextEl:".swiper-btn-next",prevEl:".swiper-btn-prev"},breakpoints:{768:{speed:700},1440:{speed:800}},on:{init:function(){C(this)},slideChange:function(){C(this)}}});function C(t){const e=document.querySelector(".swiper-btn-prev"),o=document.querySelector(".swiper-btn-next");t.isBeginning?e.classList.add("button-disabled"):e.classList.remove("button-disabled"),t.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}const W=document.querySelectorAll(".hero-btn");W.forEach(t=>{t.addEventListener("click",()=>{const e=document.querySelector(".books");e&&e.scrollIntoView({behavior:"smooth",block:"start"})})});const s={BASE_URL:"https://books-backend.p.goit.global",END_CATEGORIES:"/books/category-list",END_TOP_BOOKS:"/books/top-books",END_CATEGORIE_ID:"/books/category?category=",END_BOOK_ID:"/books/",BOOK_LIST:"bookList",BOOK_CARD_LIST:"bookCardList",currentCategory:"",itemsPerView:24,viewedBooks:0,body:document.body,scr_btn_burger_close:"ico-sprite.svg#icon-x",scr_btn_burger_normal:"ico-sprite.svg#icon-menu-alt-right"};function E(t,e){t.classList.remove(e)}function k(t,e){t.classList.add(e)}function a(t,e){t.classList.toggle(e)}function _(t,e,o,n=!1){n&&(t.innerHTML=""),t.insertAdjacentHTML("beforeend",o(e))}function I(t){return t.map(({_id:o,list_name:n,author:i,price:r,title:c,book_image:d,book_image_width:ue,book_image_height:me})=>`<li class="books-data-itm" data-id="${o}">
          <div class="books-data-img-container">
            <img
              src="${d}"
              alt="${c}"
              class="books-data-img"
            />
          </div>
          <div class="books-data-info">
						<div class="books-data-texts">
							<h3 class="books-data-title">${c}</h3>
							<p class="books-data-author">${i}</p>
						</div>
						<h3 class="books-data-price">$${r}</h3>
					</div>
          <button class="books-data-button">Learn More</button>
        </li>`).join("")}function H(t){return`<li class="b-categories-itm" data-category="all">
						<p class="b-categories-itm-text">All categories</p>
					</li> ${t.filter(o=>o.list_name.trim()!=="").map(({list_name:o})=>`<li class="b-categories-itm" data-category="${o}">
          	<p class="b-categories-itm-text">${o}</p>
        	</li>`).join("")}`}async function T(t){return await z.get(t).then(e=>e).catch(e=>e.message)}const p=document.querySelector("#modal-backdrop"),D=document.body;let v=null;async function Q(t){try{const e=await fetch(`https://books-backend.p.goit.global/books/${t}`);if(!e.ok)throw new Error("Не вдалося отримати дані про книгу");const o=await e.json();document.querySelector("#book-image").src=o.book_image,document.querySelector("#book-title").textContent=o.title,document.querySelector("#book-author").textContent=o.author,document.querySelector("#book-price").textContent=`$${o.price}`,document.querySelector("#book-details").textContent=o.description,document.querySelector("#book-shipping").textContent="We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",document.querySelector("#book-returns").textContent="You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.",p.classList.remove("is-hidden"),D.classList.add("locked");const n=document.querySelector(".accordion-container");v&&v.destroy(),n&&(v=new G(n,{duration:300,showMultiple:!1,openOnInit:[]}));const i=document.querySelector("#book-quantity");i&&(i.value=1)}catch(e){console.error("Помилка при відкритті модального вікна:",e)}}function B(){p.classList.add("is-hidden"),D.classList.remove("modal-open")}document.addEventListener("DOMContentLoaded",()=>{p.addEventListener("click",o=>{(o.target===p||o.target.closest(".modal-close"))&&B()}),document.addEventListener("keydown",o=>{o.key==="Escape"&&B()});const t=document.querySelector("#book-form");t&&t.addEventListener("submit",o=>{o.preventDefault(),alert("Дякуємо за покупку")});const e=document.querySelector("#add-to-cart");e&&e.addEventListener("click",()=>{const o=document.querySelector("#book-quantity").value;console.log(`Кількість обраних книг: ${o}`)})});const f={add(t,e){localStorage.setItem(t,JSON.stringify(e))},get(t){return JSON.parse(localStorage.getItem(t))||[]},addToCard(t,e,o,n=1,i){const r=this.get(t),c=r.findIndex(d=>d.id===e);if(c===-1)r.push({id:e,price:o,qty:n});else{const d=r[c];d.qty=Math.max(0,d.qty+(i==="+"?n:-n))}localStorage.setItem(t,JSON.stringify(r))},removeItemFromStorage(t,e){const n=this.get(t).filter(i=>i.id!==e);localStorage.setItem(t,JSON.stringify(n))},setTotalCard(t){const e=this.get(s.BOOK_CARD_LIST);let o=0;e.length&&(o=e.reduce((n,i)=>n+i.price*i.qty,0)),console.log(o),t.textContent=`${o.toFixed(2)} $`},count(t){return this.get(t).length},isInCardList(t,e){return this.get(t).find(o=>o.id===e)!==void 0},setCountTo(t,e){t.textContent=this.count(e)||0}},Y=document.querySelector(".backdrop");document.querySelector(".modal-card");const X=document.querySelector(".modal-close"),q=document.querySelector(".books-data-list"),g=document.querySelector(".b-categories-list"),y=document.querySelector(".categories-dropdown"),u=document.querySelector(".books-show-more"),A=document.querySelector(".not-found"),Z=document.querySelector(".not-found-title"),P=document.querySelector(".b-categories-_text");async function N(t){s.currentCat=t;try{const e=s.currentCat==="All categories"?`${s.BASE_URL}${s.END_TOP_BOOKS}`:`${s.BASE_URL}${s.END_CATEGORIE_ID}${s.currentCat}`,o=await T(e);let n=[];o.data.length||(Z.textContent=`No books found in "${s.currentCat}"`,E(A,"hidden"),k(u,"hidden")),s.currentCat==="All categories"?n=o.data.map(r=>r.books).reduce((r,c)=>r.concat(c),[]):n=o.data,f.add(s.BOOK_LIST,n),s.viewedBooks=Math.min(f.count(s.BOOK_LIST),s.itemsPerView);let i=n.slice(0,s.viewedBooks);P.textContent=`Showing ${s.viewedBooks} of ${n.length}`,_(q,i,I,!0),a(g,"is-open"),a(y,"is-open"),M()}catch(e){console.log(e.message)}}function M(){s.viewedBooks<f.count(s.BOOK_LIST)?E(u,"display-none"):k(u,"display-none")}function V(){s.itemsPerView=window.innerWidth>=1440?24:10}async function ee(){try{const t=`${s.BASE_URL}${s.END_CATEGORIES}`,e=await T(t);_(g,e.data,H,!0)}catch(t){console.log(t.message)}}document.addEventListener("DOMContentLoaded",()=>{V(),ee(),N("All categories")});window.addEventListener("resize",()=>{V()});q.addEventListener("click",t=>{const e=t.target.closest(".books-data-button");if(!e)return;const o=e.closest(".books-data-itm");o&&Q(o.dataset.id)});y.addEventListener("click",()=>{a(g,"is-open"),a(y,"is-open")});g.addEventListener("click",t=>{const e=t.target.closest("p");e&&(k(A,"hidden"),N(e.textContent),console.log(t.target,t.target.closest("p").textContent))});X.addEventListener("click",()=>{a(Y,"is-hidden"),a(s.body,"locked")});u.addEventListener("click",()=>{u.disabled=!0;const t=f.count(s.BOOK_LIST),e=s.viewedBooks,o=s.viewedBooks+s.itemsPerView,n=f.get(s.BOOK_LIST),i=n.slice(e,o);s.viewedBooks=Math.min(o,t),P.textContent=`Showing ${s.viewedBooks} of ${n.length}`,_(q,i,I,!1),a(g,"is-open"),a(y,"is-open"),M(),u.disabled=!1});new S(".feedbacks-swiper",{modules:[L,$],loop:!1,grabCursor:!0,spaceBetween:20,slidesPerView:1,navigation:{prevEl:".swiper-button-left",nextEl:".swiper-button-right"},pagination:{el:".custom-swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},on:{init:function(){O(this)},slideChange:function(){O(this)}}});function O(t){const e=document.querySelector(".swiper-button-left"),o=document.querySelector(".swiper-button-right");t.isBeginning?e.classList.add("button-disabled"):e.classList.remove("button-disabled"),t.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}const m=document.querySelector(".burger-menu"),K=document.querySelector(".modal-menu"),te=m.querySelector("use");m.addEventListener("click",t=>{m.disabled=!0,R()});K.addEventListener("click",t=>{t.target.closest(".nav-link")&&R()});function R(){a(m,"is-open"),a(K,"is-open"),a(s.body,"locked"),te.setAttribute("href",m.classList.contains("is-open")?s.scr_btn_burger_close:s.scr_btn_burger_normal),m.disabled=!1}const w=document.querySelector("#back-to-top");window.addEventListener("scroll",()=>{window.scrollY>600?E(w,"hidden"):k(w,"hidden")});w.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const l=document.querySelector(".form"),oe=l.querySelectorAll(".form-input, .form-user-comment"),ne=document.querySelector(".modal-close-btn"),U=document.querySelector(".modal-overlay"),se=document.querySelector(".events-list");se.addEventListener("click",t=>{const e=t.target.closest(".events-item");if(!e||!t.target.closest(".card-btn"))return;const n=e.querySelector(".events-card-heading").textContent.trim();ie(n)});l.addEventListener("submit",re);U.addEventListener("click",ae);ne.addEventListener("click",ce);function ie(t){const e=document.querySelector(".modal-overlay");e.classList.add("is-open");const o=e.querySelector(".form-subtitle");o.textContent=t,document.body.classList.add("locked"),window.addEventListener("keydown",j)}function h(){document.querySelector(".modal-overlay").classList.remove("is-open"),document.body.classList.remove("locked"),window.removeEventListener("keydown",j)}function re(t){t.preventDefault();let e=!0;if(oe.forEach(o=>{const n=o.nextElementSibling;o.checkValidity()?(o.classList.remove("error"),n&&n.classList.contains("error-text")&&(n.style.display="none")):(o.classList.add("error"),n&&n.classList.contains("error-text")&&(n.style.display="block"),e=!1)}),e){console.log("Форма валідна. Можна відправити.");const o={fullname:l.elements.fullname.value.trim(),email:l.elements.email.value.trim(),comment:l.elements.comment.value.trim()};console.log("Дані для відправки:",o),setTimeout(()=>{J.success({title:"Успішно!",message:"Форма відправлена.",position:"topRight",class:"custom-toast"}),l.reset(),h()},500)}}function ce(){h()}function ae(t){t.target===U&&h()}function j(t){t.key==="Escape"&&h()}let b=null;function de(){b=new S(".events-swiper",{modules:[L,$],loop:!1,grabCursor:!0,spaceBetween:24,slidesPerView:1,navigation:{prevEl:".swiper-button-left",nextEl:".swiper-button-right"},pagination:{el:".custom-swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24}},on:{init:function(){x(this)},slideChange:function(){x(this)}}})}function le(){b&&(b.destroy(!0,!0),b=null)}function F(){const t=window.innerWidth,e=document.querySelector(".events-control-cont"),o=document.querySelector(".swiper-pagination");t>=1440?(le(),e==null||e.classList.add("hidden"),o==null||o.classList.add("hidden")):(b||de(),e==null||e.classList.remove("hidden"),o==null||o.classList.remove("hidden"))}F();window.addEventListener("resize",F);function x(t){const e=document.querySelector(".swiper-button-left"),o=document.querySelector(".swiper-button-right");t.isBeginning?e.classList.add("button-disabled"):e.classList.remove("button-disabled"),t.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}
//# sourceMappingURL=index.js.map
