import{S as w,N as L,a as U,A as j,P as O,i as F}from"./assets/vendor-00AYbfjz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();new w(".swiper",{loop:!1,speed:600,grabCursor:!0,slidesPerView:1,modules:[L],navigation:{nextEl:".swiper-btn-next",prevEl:".swiper-btn-prev"},breakpoints:{768:{speed:700},1440:{speed:800}},on:{init:function(){_(this)},slideChange:function(){_(this)}}});function _(e){const t=document.querySelector(".swiper-btn-prev"),o=document.querySelector(".swiper-btn-next");e.isBeginning?t.classList.add("button-disabled"):t.classList.remove("button-disabled"),e.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}const z=document.querySelectorAll(".hero-btn");z.forEach(e=>{e.addEventListener("click",()=>{const t=document.querySelector(".books");t&&t.scrollIntoView({behavior:"smooth",block:"start"})})});const r={BASE_URL:"https://books-backend.p.goit.global",END_CATEGORIES:"/books/category-list",END_TOP_BOOKS:"/books/top-books",END_CATEGORIE_ID:"/books/category?category=",END_BOOK_ID:"/books/",BOOK_LIST:"bookList",BOOK_CARD_LIST:"bookCardList",currentCategory:"",itemsPerView:24,viewedBooks:0,body:document.body,scr_btn_burger_close:"ico-sprite.svg#icon-x",scr_btn_burger_normal:"ico-sprite.svg#icon-menu-alt-right"};function E(e,t){e.classList.remove(t)}function g(e,t){e.classList.add(t)}function a(e,t){e.classList.toggle(t)}function x(e,t,o,n=!1){n&&(e.innerHTML=""),e.insertAdjacentHTML("beforeend",o(t))}function G(e){return e.map(({_id:o,list_name:n,author:s,price:i,title:c,book_image:d,book_image_width:ue,book_image_height:me})=>`<li class="books-data-itm" data-id="${o}">
          <div class="books-data-img-container">
            <img
              src="${d}"
              alt="${c}"
              class="books-data-img"
            />
          </div>
          <div class="books-data-info">
						<div class="books-data-texts">
							<h3 class="books-data-title">${c}</h3>
							<p class="books-data-author">${s}</p>
						</div>
						<h3 class="books-data-price">$${i}</h3>
					</div>
          <button class="books-data-button">Learn More</button>
        </li>`).join("")}function J(e){return`<li class="b-categories-itm" data-category="all">
						<p class="b-categories-itm-text">All categories</p>
					</li> ${e.filter(o=>o.list_name.trim()!=="").map(({list_name:o})=>`<li class="b-categories-itm" data-category="${o}">
          	<p class="b-categories-itm-text">${o}</p>
        	</li>`).join("")}`}async function $(e){return await U.get(e).then(t=>t).catch(t=>t.message)}const f=document.querySelector("#modal-backdrop"),I=document.body;let h=null;async function W(e){try{const t=await fetch(`https://books-backend.p.goit.global/books/${e}`);if(!t.ok)throw new Error("Не вдалося отримати дані про книгу");const o=await t.json();document.querySelector("#book-image").src=o.book_image,document.querySelector("#book-title").textContent=o.title,document.querySelector("#book-author").textContent=o.author,document.querySelector("#book-price").textContent=`$${o.price}`,document.querySelector("#book-details").textContent=o.description,document.querySelector("#book-shipping").textContent="We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",document.querySelector("#book-returns").textContent="You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.",f.classList.remove("is-hidden"),I.classList.add("locked");const n=document.querySelector(".accordion-container");h&&h.destroy(),n&&(h=new j(n,{duration:300,showMultiple:!1,openOnInit:[]}));const s=document.querySelector("#book-quantity");s&&(s.value=1)}catch(t){console.error("Помилка при відкритті модального вікна:",t)}}function q(){f.classList.add("is-hidden"),I.classList.remove("modal-open")}document.addEventListener("DOMContentLoaded",()=>{f.addEventListener("click",o=>{(o.target===f||o.target.closest(".modal-close"))&&q()}),document.addEventListener("keydown",o=>{o.key==="Escape"&&q()});const e=document.querySelector("#book-form");e&&e.addEventListener("submit",o=>{o.preventDefault(),alert("Дякуємо за покупку")});const t=document.querySelector("#add-to-cart");t&&t.addEventListener("click",()=>{const o=document.querySelector("#book-quantity").value;console.log(`Кількість обраних книг: ${o}`)})});const b={add(e,t){localStorage.setItem(e,JSON.stringify(t))},get(e){return JSON.parse(localStorage.getItem(e))||[]},addToCard(e,t,o,n=1,s){const i=this.get(e),c=i.findIndex(d=>d.id===t);if(c===-1)i.push({id:t,price:o,qty:n});else{const d=i[c];d.qty=Math.max(0,d.qty+(s==="+"?n:-n))}localStorage.setItem(e,JSON.stringify(i))},removeItemFromStorage(e,t){const n=this.get(e).filter(s=>s.id!==t);localStorage.setItem(e,JSON.stringify(n))},setTotalCard(e){const t=this.get(r.BOOK_CARD_LIST);let o=0;t.length&&(o=t.reduce((n,s)=>n+s.price*s.qty,0)),console.log(o),e.textContent=`${o.toFixed(2)} $`},count(e){return this.get(e).length},isInCardList(e,t){return this.get(e).find(o=>o.id===t)!==void 0},setCountTo(e,t){e.textContent=this.count(t)||0}},H=document.querySelector(".backdrop");document.querySelector(".modal-card");const Q=document.querySelector(".modal-close"),T=document.querySelector(".books-data-list"),p=document.querySelector(".b-categories-list"),k=document.querySelector(".categories-dropdown"),v=document.querySelector(".books-show-more"),A=document.querySelector(".not-found"),Y=document.querySelector(".not-found-title"),X=document.querySelector(".b-categories-_text");async function D(e){r.currentCat=e;try{const t=r.currentCat==="All categories"?`${r.BASE_URL}${r.END_TOP_BOOKS}`:`${r.BASE_URL}${r.END_CATEGORIE_ID}${r.currentCat}`,o=await $(t);let n=[];o.data.length||(Y.textContent=`No books found in "${r.currentCat}"`,E(A,"hidden"),g(v,"hidden")),r.currentCat==="All categories"?n=o.data.map(s=>s.books).reduce((s,i)=>s.concat(i),[]):n=o.data,b.add(r.BOOK_LIST,n),r.viewedBooks=Math.min(b.count(r.BOOK_LIST),r.itemsPerView),console.log(b.count(r.BOOK_LIST),r.itemsPerView),X.textContent=`Showing ${n.length} of ${r.itemsPerView}`,x(T,n,G,!0),a(p,"is-open"),a(k,"is-open"),Z()}catch(t){console.log(t.message)}}function Z(){r.viewedBooks<b.count(r.BOOK_LIST)?E(v,"display-none"):g(v,"display-none")}document.addEventListener("DOMContentLoaded",()=>{P(),ee(),D("All categories")});window.addEventListener("resize",()=>{P()});T.addEventListener("click",e=>{const t=e.target.closest(".books-data-button");if(!t)return;const o=t.closest(".books-data-itm");o&&W(o.dataset.id)});function P(){r.itemsPerView=window.innerWidth>=1440?24:10}async function ee(){try{const e=`${r.BASE_URL}${r.END_CATEGORIES}`,t=await $(e);x(p,t.data,J,!0)}catch(e){console.log(e.message)}}k.addEventListener("click",e=>{a(p,"is-open"),a(k,"is-open")});p.addEventListener("click",e=>{const t=e.target.closest("p");t&&(g(A,"hidden"),D(t.textContent),console.log(e.target,e.target.closest("p").textContent))});Q.addEventListener("click",e=>{a(H,"is-hidden"),a(r.body,"locked")});new w(".feedbacks-swiper",{modules:[L,O],loop:!1,grabCursor:!0,spaceBetween:20,slidesPerView:1,navigation:{prevEl:".swiper-button-left",nextEl:".swiper-button-right"},pagination:{el:".custom-swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},on:{init:function(){C(this)},slideChange:function(){C(this)}}});function C(e){const t=document.querySelector(".swiper-button-left"),o=document.querySelector(".swiper-button-right");e.isBeginning?t.classList.add("button-disabled"):t.classList.remove("button-disabled"),e.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}const u=document.querySelector(".burger-menu"),N=document.querySelector(".modal-menu"),te=u.querySelector("use");u.addEventListener("click",e=>{u.disabled=!0,M()});N.addEventListener("click",e=>{e.target.closest(".nav-link")&&M()});function M(){a(u,"is-open"),a(N,"is-open"),a(r.body,"locked"),te.setAttribute("href",u.classList.contains("is-open")?r.scr_btn_burger_close:r.scr_btn_burger_normal),u.disabled=!1}const S=document.querySelector("#back-to-top");window.addEventListener("scroll",()=>{window.scrollY>600?E(S,"hidden"):g(S,"hidden")});S.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const l=document.querySelector(".form"),oe=l.querySelectorAll(".form-input, .form-user-comment"),ne=document.querySelector(".modal-close-btn"),V=document.querySelector(".modal-overlay"),se=document.querySelector(".events-list");se.addEventListener("click",e=>{const t=e.target.closest(".events-item");if(!t||!e.target.closest(".card-btn"))return;const n=t.querySelector(".events-card-heading").textContent.trim();re(n)});l.addEventListener("submit",ie);V.addEventListener("click",ae);ne.addEventListener("click",ce);function re(e){const t=document.querySelector(".modal-overlay");t.classList.add("is-open");const o=t.querySelector(".form-subtitle");o.textContent=e,document.body.classList.add("locked"),window.addEventListener("keydown",K)}function y(){document.querySelector(".modal-overlay").classList.remove("is-open"),document.body.classList.remove("locked"),window.removeEventListener("keydown",K)}function ie(e){e.preventDefault();let t=!0;if(oe.forEach(o=>{const n=o.nextElementSibling;o.checkValidity()?(o.classList.remove("error"),n&&n.classList.contains("error-text")&&(n.style.display="none")):(o.classList.add("error"),n&&n.classList.contains("error-text")&&(n.style.display="block"),t=!1)}),t){console.log("Форма валідна. Можна відправити.");const o={fullname:l.elements.fullname.value.trim(),email:l.elements.email.value.trim(),comment:l.elements.comment.value.trim()};console.log("Дані для відправки:",o),setTimeout(()=>{F.success({title:"Успішно!",message:"Форма відправлена.",position:"topRight",class:"custom-toast"}),l.reset(),y()},500)}}function ce(){y()}function ae(e){e.target===V&&y()}function K(e){e.key==="Escape"&&y()}let m=null;function de(){m=new w(".events-swiper",{modules:[L,O],loop:!1,grabCursor:!0,spaceBetween:24,slidesPerView:1,navigation:{prevEl:".swiper-button-left",nextEl:".swiper-button-right"},pagination:{el:".custom-swiper-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24}},on:{init:function(){B(this)},slideChange:function(){B(this)}}})}function le(){m&&(m.destroy(!0,!0),m=null)}function R(){const e=window.innerWidth,t=document.querySelector(".events-control-cont"),o=document.querySelector(".swiper-pagination");e>=1440?(le(),t==null||t.classList.add("hidden"),o==null||o.classList.add("hidden")):(m||de(),t==null||t.classList.remove("hidden"),o==null||o.classList.remove("hidden"))}R();window.addEventListener("resize",R);function B(e){const t=document.querySelector(".swiper-button-left"),o=document.querySelector(".swiper-button-right");e.isBeginning?t.classList.add("button-disabled"):t.classList.remove("button-disabled"),e.isEnd?o.classList.add("button-disabled"):o.classList.remove("button-disabled")}
//# sourceMappingURL=index.js.map
